webpackJsonp([1],{132:function(e,t,a){"use strict";(function(e){function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),s=a(0),i=function(e){return e&&e.__esModule?e:{default:e}}(s),c=a(2);a(15),a(38);var u=a(13),p=a(4),d=function(t){function a(e){l(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={public:t.props.blogDetail.public,name:t.props.blogDetail.name,description:t.props.blogDetail.description},t}return r(a,t),o(a,[{key:"formSubmit",value:function(e){e.preventDefault(),this.props.dispatch((0,u.api)({type:"BLOG_EDIT",fetch:"blog.editMyBlog",_id:this.props.blogDetail.blogId,public:this.state.public,name:this.state.name,description:this.state.description}))}},{key:"fieldChange",value:function(e){var t={},a="public"==e.target.id?e.target.checked:e.target.value;t[e.target.id]=a,this.setState(t)}},{key:"componentWillReceiveProps",value:function(t){this.setState({public:t.blogDetail.public,name:t.blogDetail.name,description:t.blogDetail.description}),"success_edit"===t.blogDetail.fetch_status&&this.props.dispatch((0,u.api)({type:"BLOG_DETAIL",fetch:"blog.getMyBlogDetail",_id:this.props.blogDetail.blogId})).then(function(){e(".modal").modal("hide")})}},{key:"render",value:function(){var e=null;return"error_edit"===this.props.blogDetail.fetch_status?e={className:"danger",text:this.props.blogDetail.fetch_error}:"send_edit"===this.props.blogDetail.fetch_status?e={className:"info",text:"Loading, please wait"}:"success_edit"===this.props.blogDetail.fetch_status&&(e={className:"success",text:"Edited successfully"}),i.default.createElement("div",null,i.default.createElement("div",{className:"modal fade",tabIndex:"-1",role:"dialog"},i.default.createElement("div",{className:"modal-dialog modal-lg",role:"document"},i.default.createElement("div",{className:"modal-content"},i.default.createElement("div",{className:"modal-header"},i.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},i.default.createElement("span",{"aria-hidden":"true"},"×")),i.default.createElement("h4",{className:"modal-title"},"Modal title")),i.default.createElement("form",{onSubmit:this.formSubmit.bind(this)},i.default.createElement("div",{className:"modal-body"},i.default.createElement(p.Alert,{opts:e}),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"name"},"Name"),i.default.createElement("input",{type:"text",className:"form-control",id:"name",placeholder:"Name",onChange:this.fieldChange.bind(this),value:this.state.name})),i.default.createElement("div",{className:"form-group"},i.default.createElement("label",{htmlFor:"exampleInputPassword1"},"Description"),i.default.createElement("textarea",{className:"form-control",id:"description",placeholder:"Description",onChange:this.fieldChange.bind(this),value:this.state.description})),i.default.createElement("div",{className:"checkbox"},i.default.createElement("label",null,i.default.createElement("input",{type:"checkbox",id:"public",onChange:this.fieldChange.bind(this),checked:!!this.state.public})," Public"))),i.default.createElement("div",{className:"modal-footer"},i.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),i.default.createElement("button",{type:"submit",className:"btn btn-primary"},i.default.createElement("span",{className:"glyphicon glyphicon-floppy-disk"}),"  Save changes")))))))}}]),a}(i.default.Component),f=function(t){function a(){return l(this,a),n(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return r(a,t),o(a,[{key:"showModal",value:function(){e(".modal").modal("show")}},{key:"componentWillMount",value:function(){this.props.dispatch((0,u.api)({type:"BLOG_DETAIL",fetch:"blog.getMyBlogDetail",_id:this.props.blogDetail.blogId}))}},{key:"render",value:function(){var e=null,t=null;t=this.props.blogDetail.public?i.default.createElement("p",null,i.default.createElement("span",{className:"glyphicon glyphicon-eye-open"}),"   Public"):i.default.createElement("p",null,i.default.createElement("span",{className:"glyphicon glyphicon-eye-close"}),"   Private"),"error"===this.props.blogDetail.fetch_status?e={className:"danger",text:this.props.blogDetail.fetch_error}:"send"===this.props.blogDetail.fetch_status&&(e={className:"info",text:"Loading, please wait"});var a="/my-post-detail/"+this.props.blogDetail.blogId+"/-1";return i.default.createElement("div",null,i.default.createElement("ol",{className:"breadcrumb"},i.default.createElement("li",null,i.default.createElement("a",{href:"/profile"},i.default.createElement("span",{className:"glyphicon glyphicon-home"}),"  Profile")),i.default.createElement("li",null,i.default.createElement("a",{href:"/my-blog-list"},"My blogs")),i.default.createElement("li",{className:"active"},this.props.blogDetail.name)),i.default.createElement("div",{className:"panel panel-default"},i.default.createElement("div",{className:"panel-heading"},i.default.createElement("h4",{className:"panel-title"},this.props.blogDetail.name)),i.default.createElement("div",{className:"panel-body"},i.default.createElement(p.Alert,{opts:e}),i.default.createElement("p",null,this.props.blogDetail.description),t,i.default.createElement("button",{className:"btn btn-default",onClick:this.showModal.bind(this)},i.default.createElement("span",{className:"glyphicon glyphicon-pencil"}),"  Edit")," ",i.default.createElement("a",{className:"btn btn-default",href:a},i.default.createElement("span",{className:"glyphicon glyphicon-plus"}),"  Add post"))),i.default.createElement(d,{blogDetail:this.props.blogDetail,dispatch:this.props.dispatch}))}}]),a}(i.default.Component),m=function(e){return{blogDetail:e.blogDetail}};f=(0,c.connect)(m)(f),t.default=f}).call(t,a(15))},305:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(0),r=l(n),o=a(8),s=a(22),i=a(2),c=a(39),u=a(40),p=l(u);a(10),a(11);var d=a(4),f=a(12),m=l(f),h=a(306),b=l(h),_=a(308),g=l(_),y=a(309),E=l(y),v=(0,s.createStore)((0,s.combineReducers)({auth:m.default,blogDetail:g.default,postList:E.default}),(0,s.compose)((0,s.applyMiddleware)(p.default),(0,s.applyMiddleware)((0,c.createLogger)()))),O=(0,d.layout)(b.default,!0);(0,o.render)(r.default.createElement(i.Provider,{store:v},r.default.createElement(O,null)),document.getElementById("root"))},306:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(0),c=l(i);a(2),a(15),a(38);var u=(a(13),a(4),a(132)),p=l(u),d=a(307),f=l(d),m=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(p.default,null),c.default.createElement(f.default,null))}}]),t}(c.default.Component);t.default=m},307:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(0),c=l(i),u=a(2),p=a(80),d=l(p);a(15),a(38);var f=a(13),m=a(4),h=a(132),b=(l(h),function(e){function t(e){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),s(t,[{key:"removePost",value:function(e){e.preventDefault(),this.props.removePost(this.props.item._id)}},{key:"render",value:function(){var e="/my-post-detail/"+this.props.blogId+"/"+this.props.item._id;return c.default.createElement("div",{className:"col-md-4"},c.default.createElement("div",{className:"panel panel-default"},c.default.createElement("div",{className:"panel-heading"},c.default.createElement("h4",{className:"panel-title"},c.default.createElement("span",{className:"glyphicon glyphicon-file"}),"  ",c.default.createElement("a",{href:e},this.props.item.name))),c.default.createElement("div",{className:"panel-body"},c.default.createElement("div",{dangerouslySetInnerHTML:{__html:d.default.sanitize(this.props.item.description)}}),c.default.createElement("p",null,"Status: ",this.props.item.status,"   Approved: ",this.props.item.approved,"  "),c.default.createElement("p",null,c.default.createElement("span",{className:"glyphicon glyphicon-time"}),"   Created: ",this.props.item.created,c.default.createElement("br",null),"Updated: ",this.props.item.updated,c.default.createElement("br",null),c.default.createElement("button",{className:"btn btn-danger btn-xs",type:"button",onClick:this.removePost.bind(this)},c.default.createElement("span",{className:"glyphicon glyphicon-trash"}))," Remove"))))}}]),t}(c.default.Component)),_=function(e){function t(){return n(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"componentWillMount",value:function(){this.props.dispatch((0,f.api)({type:"POST_LIST",fetch:"blog.getMyBlogPosts",_id:this.props.postList.blogId}))}},{key:"removePost",value:function(e){this.props.dispatch((0,f.api)({type:"POST_REMOVE",fetch:"blog.removePost",_id:e}))}},{key:"render",value:function(){var e=this,t=null,a=null;return"error"===this.props.postList.fetch_status?t={className:"danger",text:this.props.postList.fetch_error}:"send"===this.props.postList.fetch_status&&(t={className:"info",text:"Loading, please wait"}),this.props.postList.list&&this.props.postList.list.length&&(a=this.props.postList.list.map(function(t){return c.default.createElement(b,{key:t._id,item:t,blogId:e.props.postList.blogId,removePost:e.removePost.bind(e)})})),c.default.createElement("div",null,c.default.createElement(m.Alert,{opts:t}),c.default.createElement("div",{className:"row"},a))}}]),t}(c.default.Component),g=function(e){return{postList:e.postList}};_=(0,u.connect)(g)(_),t.default=_},308:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n=window.locals.blogId||null,r={fetch_status:null,fetch_error:null,blogId:n,created:"",public:null,name:"",description:""},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"BLOG_DETAIL_SEND":return e=l({},e),e.fetch_status="send",e;case"BLOG_DETAIL_SUCCESS":return e=l({},e),e.created=t.data.created,e.public=t.data.public,e.name=t.data.name,e.description=t.data.description,e.fetch_status="success",e;case"BLOG_DETAIL_ERROR":return e=l({},e),e.fetch_status="error",e.fetch_error=t.error,e;case"BLOG_EDIT_SEND":return e=l({},e),e.fetch_status="send_edit",e.public=t.public,e.name=t.name,e.description=t.description,e;case"BLOG_EDIT_SUCCESS":return e=l({},e),e.fetch_status="success_edit",e;case"BLOG_EDIT_ERROR":return e=l({},e),e.fetch_status="error_edit",e.fetch_error=t.error,e;default:return e}};t.default=o},309:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n=window.locals.blogId||null,r={fetch_status:null,fetch_error:null,blogId:n,list:[]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case"POST_LIST_SEND":return e=l({},e),e.fetch_status="send",e;case"POST_LIST_SUCCESS":return e=l({},e),e.list=t.data,e.fetch_status="success",e;case"POST_LIST_ERROR":return e=l({},e),e.fetch_status="error",e.fetch_error=t.error,e.list=[],e;case"POST_REMOVE_SEND":return e=l({},e),e.fetch_status="send",e;case"POST_REMOVE_SUCCESS":return e.fetch_status="success",e=l({},e),_.remove(e.list,function(e){return e._id===t.data._id}),e;case"POST_REMOVE_ERROR":return e.fetch_status="error",e.fetch_error=t.error,e=l({},e);default:return e}};t.default=o}},[305]);
//# sourceMappingURL=my_blog_detail.js.map