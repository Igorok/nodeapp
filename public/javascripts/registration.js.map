{"version":3,"sources":["webpack:///registration.js","webpack:///./src/registration.js","webpack:///./src/Auth/RegComp.js","webpack:///./src/Auth/RegRed.js"],"names":["webpackJsonp","284","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_react","_react2","_reactDom","_reactRedux","_component","_AuthRed","_AuthRed2","_RegComp","_RegComp2","_RegRed","_RegRed2","_configureStore","store","configureStore","auth","reg","Comp","layout","RegComp","render","createElement","Provider","document","getElementById","285","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_action","_React$Component","this","_this","getPrototypeOf","state","login","email","password","confPassword","isAuthenticated","window","location","e","stateObj","id","setState","preventDefault","captcha","dispatch","type","error","api","fetch","v","status","setTimeout","disabled","alertOpts","className","text","onSubmit","formSubmit","bind","htmlFor","placeholder","defaultValue","onChange","changeField","required","MathCaptcha","cb","checkCaptcha","Alert","opts","href","React","Component","mapStateToProps","connect","286","initState","action"],"mappings":"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","file":"registration.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 284:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(8);\n\nvar _reactRedux = __webpack_require__(2);\n\n__webpack_require__(10);\n\n__webpack_require__(11);\n\nvar _component = __webpack_require__(4);\n\nvar _AuthRed = __webpack_require__(12);\n\nvar _AuthRed2 = _interopRequireDefault(_AuthRed);\n\nvar _RegComp = __webpack_require__(285);\n\nvar _RegComp2 = _interopRequireDefault(_RegComp);\n\nvar _RegRed = __webpack_require__(286);\n\nvar _RegRed2 = _interopRequireDefault(_RegRed);\n\nvar _configureStore = __webpack_require__(18);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar store = (0, _configureStore.configureStore)({\n\tauth: _AuthRed2.default,\n\treg: _RegRed2.default\n});\n\nvar Comp = (0, _component.layout)(_RegComp2.default);\n(0, _reactDom.render)(_react2.default.createElement(\n\t_reactRedux.Provider,\n\t{ store: store },\n\t_react2.default.createElement(Comp, null)\n), document.getElementById('root'));\n\n/***/ }),\n\n/***/ 285:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(0);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactRedux = __webpack_require__(2);\n\nvar _action = __webpack_require__(13);\n\nvar _component = __webpack_require__(4);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RegComp = function (_React$Component) {\n    _inherits(RegComp, _React$Component);\n\n    function RegComp(props) {\n        _classCallCheck(this, RegComp);\n\n        var _this = _possibleConstructorReturn(this, (RegComp.__proto__ || Object.getPrototypeOf(RegComp)).call(this, props));\n\n        _this.state = {\n            login: '',\n            email: '',\n            password: '',\n            confPassword: ''\n        };\n        return _this;\n    }\n\n    _createClass(RegComp, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            if (this.props.auth.isAuthenticated) return window.location = '/';\n        }\n    }, {\n        key: 'changeField',\n        value: function changeField(e) {\n            var stateObj = {};\n            stateObj[e.target.id] = e.target.value;\n            this.setState(stateObj);\n        }\n    }, {\n        key: 'formSubmit',\n        value: function formSubmit(e) {\n            e.preventDefault();\n\n            if (!this.state.captcha) {\n                return this.props.dispatch({\n                    type: 'REG_ERROR',\n                    error: 'Captcha is not valid!!'\n                });\n            }\n\n            if (this.state.password !== this.state.confPassword) {\n                return this.props.dispatch({\n                    type: 'REG_ERROR',\n                    error: 'Please, confirm password!'\n                });\n            }\n\n            this.props.dispatch((0, _action.api)({\n                type: 'REG',\n                fetch: 'user.registration',\n                login: this.state.login,\n                email: this.state.email,\n                password: this.state.password\n            }));\n        }\n    }, {\n        key: 'checkCaptcha',\n        value: function checkCaptcha(v) {\n            this.setState({\n                captcha: v\n            });\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate() {\n            if (this.props.reg.status === 'success') {\n                setTimeout(function () {\n                    return window.location = '/login';\n                }, 1000);\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var disabled = null,\n                alertOpts = null;\n\n            if (this.props.reg.status === 'error') {\n                alertOpts = {\n                    className: 'danger',\n                    text: this.props.reg.error || 'Error, wrong login or password'\n                };\n            } else if (this.props.reg.status === 'send') {\n                disabled = 'disabled';\n                alertOpts = {\n                    className: 'info',\n                    text: 'Loading, please wait'\n                };\n            } else if (this.props.reg.status === 'success') {\n                alertOpts = {\n                    className: 'success',\n                    text: 'Registered successfully, please login!'\n                };\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'row' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-lg-offset-4 col-lg-4' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'panel panel-default' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'panel-heading' },\n                            _react2.default.createElement(\n                                'h3',\n                                { className: 'panel-title' },\n                                'Authentication'\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'panel-body' },\n                            _react2.default.createElement(\n                                'form',\n                                { onSubmit: this.formSubmit.bind(this) },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'form-group' },\n                                    _react2.default.createElement(\n                                        'label',\n                                        { htmlFor: 'login' },\n                                        'Login'\n                                    ),\n                                    _react2.default.createElement('input', {\n                                        type: 'text',\n                                        className: 'form-control',\n                                        id: 'login',\n                                        placeholder: 'Login',\n                                        defaultValue: this.state.login,\n                                        onChange: this.changeField.bind(this),\n                                        required: true\n                                    })\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'form-group' },\n                                    _react2.default.createElement(\n                                        'label',\n                                        { htmlFor: 'email' },\n                                        'Email'\n                                    ),\n                                    _react2.default.createElement('input', {\n                                        type: 'email',\n                                        className: 'form-control',\n                                        id: 'email',\n                                        placeholder: 'Email',\n                                        defaultValue: this.state.email,\n                                        onChange: this.changeField.bind(this),\n                                        required: true\n                                    })\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'form-group' },\n                                    _react2.default.createElement(\n                                        'label',\n                                        { htmlFor: 'password' },\n                                        'Password'\n                                    ),\n                                    _react2.default.createElement('input', {\n                                        type: 'password',\n                                        className: 'form-control',\n                                        id: 'password',\n                                        placeholder: 'Password',\n                                        defaultValue: this.state.password,\n                                        onChange: this.changeField.bind(this),\n                                        required: true\n                                    })\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'form-group' },\n                                    _react2.default.createElement(\n                                        'label',\n                                        { htmlFor: 'confPassword' },\n                                        'Confirm password'\n                                    ),\n                                    _react2.default.createElement('input', {\n                                        type: 'password',\n                                        className: 'form-control',\n                                        id: 'confPassword',\n                                        placeholder: 'Confirm password',\n                                        defaultValue: this.state.confPassword,\n                                        onChange: this.changeField.bind(this),\n                                        required: true\n                                    })\n                                ),\n                                _react2.default.createElement(_component.MathCaptcha, { cb: this.checkCaptcha.bind(this) }),\n                                _react2.default.createElement(_component.Alert, { opts: alertOpts }),\n                                _react2.default.createElement(\n                                    'button',\n                                    {\n                                        type: 'submit',\n                                        className: 'btn btn-default btn-block',\n                                        disabled: disabled\n                                    },\n                                    'Submit'\n                                )\n                            ),\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement(\n                                'p',\n                                { className: 'text-center' },\n                                _react2.default.createElement(\n                                    'a',\n                                    { href: '/login' },\n                                    'Authorisation'\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return RegComp;\n}(_react2.default.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n    return _extends({}, state);\n};\nRegComp = (0, _reactRedux.connect)(mapStateToProps)(RegComp);\n\nexports.default = RegComp;\n\n/***/ }),\n\n/***/ 286:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar initState = {};\nvar reg = function reg() {\n\tvar state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n\tvar action = arguments[1];\n\n\tswitch (action.type) {\n\t\tcase 'REG_SEND':\n\t\t\treturn {\n\t\t\t\tstatus: 'send'\n\t\t\t};\n\t\tcase 'REG_SUCCESS':\n\t\t\treturn {\n\t\t\t\tstatus: 'success'\n\t\t\t};\n\t\tcase 'REG_ERROR':\n\t\t\treturn {\n\t\t\t\tstatus: 'error',\n\t\t\t\terror: action.error\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexports.default = reg;\n\n/***/ })\n\n},[284]);\n\n\n// WEBPACK FOOTER //\n// registration.js","import React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\n\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './styles/index.scss'\n\nimport {layout} from './helpers/component'\nimport auth from './Auth/AuthRed'\nimport RegComp from './Auth/RegComp'\n\nimport reg from './Auth/RegRed'\n\nimport {configureStore} from './helpers/configureStore'\n\nlet store = configureStore({\n\tauth: auth,\n\treg: reg,\n});\n\nlet Comp = layout(RegComp);\nrender(\n\t<Provider store={store}>\n\t\t<Comp />\n\t</Provider>,\n\tdocument.getElementById('root')\n)\n\n\n// WEBPACK FOOTER //\n// ./src/registration.js","import React from 'react'\nimport { connect } from 'react-redux'\nimport {api} from '../helpers/action'\nimport {Alert, MathCaptcha} from '../helpers/component'\n\nclass RegComp extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: '',\n            email: '',\n            password: '',\n            confPassword: '',\n        }\n    }\n    \n    componentDidMount() {\n        if (this.props.auth.isAuthenticated) return window.location = '/';\n    }\n\n    changeField (e) {\n        let stateObj = {};\n        stateObj[e.target.id] = e.target.value;\n        this.setState(stateObj);\n    }\n    formSubmit (e) {\n        e.preventDefault();\n        \n        if (! this.state.captcha) {\n            return this.props.dispatch({\n                type: 'REG_ERROR',\n                error: 'Captcha is not valid!!',\n            });\n        }\n\n        if (this.state.password !== this.state.confPassword) {\n            return this.props.dispatch({\n                type: 'REG_ERROR',\n                error: 'Please, confirm password!',\n            });\n        }\n\n        this.props.dispatch(api({\n            type: 'REG',\n            fetch: 'user.registration',\n            login: this.state.login,\n            email: this.state.email,\n            password: this.state.password,\n        }));\n    }\n    checkCaptcha (v) {\n        this.setState({\n            captcha: v,\n        })\n    }\n\n    componentDidUpdate () {\n        if (this.props.reg.status === 'success') {\n            setTimeout(() => {\n                return window.location = '/login';\n            }, 1000);\n        }\n    }\n\n    render () {\n        let disabled = null,\n            alertOpts = null;\n    \n        if (this.props.reg.status === 'error') {\n            alertOpts = {\n                className: 'danger',\n                text: this.props.reg.error || 'Error, wrong login or password'\n            }\n        } else if (this.props.reg.status === 'send') {\n            disabled = 'disabled';\n            alertOpts = {\n                className: 'info',\n                text: 'Loading, please wait',\n            }\n        } else if (this.props.reg.status === 'success') {\n            alertOpts = {\n                className: 'success',\n                text: 'Registered successfully, please login!',\n            }\n        }\n\n        return <div className=\"row\">\n            <div className=\"col-lg-offset-4 col-lg-4\">\n                <div className=\"panel panel-default\">\n                    <div className=\"panel-heading\">\n                        <h3 className=\"panel-title\">Authentication</h3>\n                    </div>\n                    <div className=\"panel-body\">\n                        <form onSubmit={::this.formSubmit}>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"login\">Login</label>\n                                <input \n                                    type=\"text\" \n                                    className=\"form-control\" \n                                    id=\"login\" \n                                    placeholder=\"Login\" \n                                    defaultValue={this.state.login}\n                                    onChange={::this.changeField}\n                                    required\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"email\">Email</label>\n                                <input \n                                    type=\"email\" \n                                    className=\"form-control\" \n                                    id=\"email\" \n                                    placeholder=\"Email\" \n                                    defaultValue={this.state.email}\n                                    onChange={::this.changeField}\n                                    required\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"password\">Password</label>\n                                <input \n                                    type=\"password\" \n                                    className=\"form-control\" \n                                    id=\"password\" \n                                    placeholder=\"Password\" \n                                    defaultValue={this.state.password}\n                                    onChange={::this.changeField}\n                                    required\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"confPassword\">Confirm password</label>\n                                <input \n                                    type=\"password\" \n                                    className=\"form-control\" \n                                    id=\"confPassword\" \n                                    placeholder=\"Confirm password\" \n                                    defaultValue={this.state.confPassword}\n                                    onChange={::this.changeField}\n                                    required\n                                />\n                            </div>\n                            <MathCaptcha cb={::this.checkCaptcha} />\n                            <Alert opts={alertOpts} />\n                            <button \n                                type=\"submit\" \n                                className=\"btn btn-default btn-block\"\n                                disabled={disabled}\n                            >Submit</button>\n                        </form>\n                        <br />\n                        <p className='text-center'>\n                            <a href='/login'>Authorisation</a>\n                        </p>\n                        \n                    </div>\n                </div>\n            </div>\n        </div>\n    }\n}\nconst mapStateToProps = (state) => {\n    return {...state}\n}\nRegComp = connect(mapStateToProps)(RegComp)\n\nexport default RegComp\n\n\n// WEBPACK FOOTER //\n// ./src/Auth/RegComp.js","const initState = {};\nconst reg = (state = initState, action) => {\n\tswitch (action.type) {\n\t\tcase 'REG_SEND':\n\t\t\treturn {\n\t\t\t\tstatus: 'send',\n\t\t\t};\n\t\tcase 'REG_SUCCESS':\n\t\t\treturn {\n\t\t\t\tstatus: 'success',\n\t\t\t};\n\t\tcase 'REG_ERROR':\n\t\t\treturn {\n\t\t\t\tstatus: 'error',\n\t\t\t\terror: action.error,\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default reg\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Auth/RegRed.js"],"sourceRoot":""}